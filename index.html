<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Generador de Boletas - Modo Oscuro</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游늶</text></svg>">
<style>
/* === TEMA OSCURO: Fondo general oscuro y tarjeta m치s suave === */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1a1e24; /* Fondo exterior oscuro */
    padding: 20px;
    display: flex;
    justify-content: center;
    margin: 0;
    min-height: 100vh;
    align-items: center;
}

.container {
    background: #2d333b; /* Fondo de la tarjeta gris oscuro (en lugar de blanco) */
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.5); /* Sombra m치s pronunciada */
    width: 100%;
    max-width: 500px;
    color: #e1e4e8; /* Color de texto principal claro */
}

h2 {
    color: #58a6ff; /* Azul m치s brillante para el t칤tulo */
    text-align: center;
    margin-top: 0;
    border-bottom: 2px solid #444c56; /* L칤nea divisoria m치s oscura */
    padding-bottom: 10px;
}

label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
    font-size: 0.85em;
    color: #adbac7; /* Gris claro para las etiquetas */
}

input, select {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border: 1px solid #444c56; /* Borde oscuro */
    border-radius: 4px;
    box-sizing: border-box;
    background-color: #22272e; /* Fondo de inputs oscuro */
    color: #e1e4e8; /* Texto dentro de inputs claro */
}

/* Estilo para el contenedor del datalist (opcional, mejora la coherencia) */
datalist {
    background-color: #22272e;
    color: #e1e4e8;
}

/* Opci칩n para cuando se despliega el select */
option {
    background-color: #22272e;
    color: #e1e4e8;
}

.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.grid-small {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

button {
    width: 100%;
    padding: 12px;
    margin-top: 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1em;
    transition: 0.3s;
}

.btn-generate {
    background: #1f6feb; /* Azul m치s profundo */
    color: white;
}
.btn-generate:hover {
    background: #1158c7; /* Azul m치s oscuro al pasar el mouse */
}

.btn-copy {
    background: #238636; /* Verde m치s oscuro y apagado */
    color: white;
    display: none;
    margin-top: 10px;
}
.btn-copy:hover {
    background: #2ea043; /* Verde un poco m치s brillante al pasar el mouse */
}

/* Estilo para el 치rea de resultado */
#resultado {
    margin-top: 20px;
    padding: 15px;
    background: #1c2128; /* Fondo casi negro para el texto generado */
    border: 1px solid #444c56;
    white-space: pre;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    display: none;
    border-left: 5px solid #58a6ff; /* Borde azul brillante */
    color: #e1e4e8; /* Texto claro */
    border-radius: 4px;
}

/* Ajuste para el contenedor de "P치nico" que aparece din치micamente */
#panicoDondeContainer {
    margin-top: 10px;
}

</style>
</head>
<body>

<div class="container">
<h2>游늶 Boleta (Modo Oscuro)</h2>

<label>B (N칰mero de Boleta):</label>
<input type="number" id="numBoleta">

<label>T (T칠cnico):</label>
<input list="tecnicos" id="tecnico" placeholder="Seleccione o escriba el nombre...">
<datalist id="tecnicos">
    <option value="Alejandro J.">
    <option value="Edwin O.">
    <option value="Franklin R.">
    <option value="Javier J.">
    <option value="Jorge M.">
    <option value="Manuel G.">
    <option value="Samuel S.">
    <option value="Sebastian A.">
</datalist>

<label>O (Operador):</label>
<input list="operadores" id="operador" placeholder="Seleccione o escriba el operador...">
<datalist id="operadores">
    <option value="Daniel H.">
    <option value="Oscar R.">
    <option value="Josu칠 R.">
    <option value="Carlos N.">
    <option value="Eduardo C.">
</datalist>

<label>T (Tipo de Trabajo):</label>
<input type="text" id="tipoTrabajo" value="Nueva instalacion">

<label>UP (Ubicaci칩n GPS):</label>
<input type="text" id="ubicacion" value="Atras del tacometro">

<div class="grid">
    <div>
        <label>P (P치nico):</label>
        <select id="panico" onchange="togglePanicoDonde()">
            <option>No</option>
            <option>Si</option>
        </select>
    </div>
    <div>
        <div id="panicoDondeContainer" style="display:none;">
            <label>P - 쮻칩nde?:</label>
            <input type="text" id="panicoDonde" placeholder="Indique d칩nde est치 el p치nico">
        </div>
        <label>A (Apagado):</label>
        <select id="apagado">
            <option>No</option>
            <option>Si. Normal 12V</option>
        </select>
    </div>
</div>

<label>PT (Plataforma):</label>
<select id="pt">
    <option value="CXPSFLEET">CXPSFLEET</option>
    <option value="COMPASSXPS">COMPASSXPS</option>
</select>

<div class="grid-small">
    <div><label>RP:</label><select id="rp"><option>Si</option><option>No</option></select></div>
    <div><label>UG:</label><select id="ug"><option>Si</option><option>No</option></select></div>
    <div><label>DP:</label><select id="dp"><option>Si</option><option>No</option></select></div>
    <div><label>IGN:</label><select id="ign"><option>Si</option><option>No</option></select></div>
    <div><label>IC:</label><select id="ic"><option>Si</option><option>No</option></select></div>
    <div><label>CO:</label><select id="co"><option>Si</option><option>No</option></select></div>
    <div><label>M:</label><select id="m"><option>No</option><option>Si</option></select></div>
</div>

<label>Topfly?</label>
<select id="topfly" onchange="toggleTopfly()">
    <option>No</option>
    <option>Si</option>
</select>

<div id="topflyContainer" style="display:none;">
    <label>IDRelay:</label>
    <input type="text" id="idrelay" placeholder="Pegue el IDRelay">
</div>

<button class="btn-generate" onclick="generar()">GENERAR TEXTO</button>
<div id="resultado"></div>
<button id="btnCopy" class="btn-copy" onclick="copiar()">游늶 COPIAR AL PORTAPAPELES</button>

</div>

<script>
function pad(clave, valor){
    // ancho m치ximo de todas las etiquetas visibles
    const ancho = 9; // Mide "ENCENDIDO" que es la m치s larga
    let espacios = ' '.repeat(Math.max(ancho - clave.length, 0));
    return clave + espacios + ' : ' + valor;
}



function generar() {
    const ahora = new Date();
    const opcionesFecha = { weekday:'long', year:'numeric', month:'long', day:'numeric'};
    const b = document.getElementById('numBoleta').value;
    const f = ahora.toLocaleDateString('es-ES', opcionesFecha);
    const h = ahora.toLocaleTimeString('es-ES');
    const t = document.getElementById('tecnico').value;
    const o = document.getElementById('operador').value;
    const tt = document.getElementById('tipoTrabajo').value;
    const up = document.getElementById('ubicacion').value;
    const p = document.getElementById('panico').value;
    const pd = document.getElementById('panicoDonde').value;
    const a = document.getElementById('apagado').value;
    const pt = document.getElementById('pt').value;
    const rp = document.getElementById('rp').value;
    const ug = document.getElementById('ug').value;
    const dp = document.getElementById('dp').value;
    const ign = document.getElementById('ign').value;
    const ic = document.getElementById('ic').value;
    const co = document.getElementById('co').value;
    const m = document.getElementById('m').value;
    const topfly = document.getElementById('topfly').value;
    const idrelay = document.getElementById('idrelay').value;

    // Comando Topfly
let comandoTopfly = '';
if(topfly === 'Si' && idrelay){
    const apagadoTF = `BLERELAY,1234,${idrelay},654321,1#`;
    const encendidoTF = `BLERELAY,1234,${idrelay},654321,0#`;

    comandoTopfly = '\n\n' +  // <- DOS saltos de l칤nea antes
                     pad('IDRelay', idrelay) + '\n' +
                     pad('APAGADO', apagadoTF) + '\n' +
                     pad('ENCENDIDO', encendidoTF);
}




    // Texto principal
   const texto = 
    pad('B', b) + '\n' +
    pad('F', f) + '\n' +
    pad('H', h) + '\n' +
    pad('TEC', t) + '\n' +
    pad('O', o) + '\n' +
    pad('TT', tt) + '\n' +
    pad('UP', up) + '\n' +
    pad('P', p + (p==='Si' && pd ? ' (' + pd + ')' : '')) + '\n' +
    pad('A', a) + '\n' +
    pad('PT', pt) + '\n' +
    pad('RP', rp) + '\n' +
    pad('UG', ug) + '\n' +
    pad('DP', dp) + '\n' +
    pad('IGN', ign) + '\n' +
    pad('IC', ic) + '\n' +
    pad('CO', co) + '\n' +
    pad('M', m) +
    comandoTopfly; // <- ahora s칤 habr치 un rengl칩n en blanco visual



    const resDiv = document.getElementById('resultado');
    resDiv.innerText = texto;
    resDiv.style.display = 'block';
    document.getElementById('btnCopy').style.display = 'block';
}

function toggleTopfly() {
    const topfly = document.getElementById('topfly').value;
    const cont = document.getElementById('topflyContainer');
    cont.style.display = topfly==='Si' ? 'block' : 'none';
    if(topfly!=='Si') document.getElementById('idrelay').value='';
}

function togglePanicoDonde() {
    const panico = document.getElementById('panico').value;
    const cont = document.getElementById('panicoDondeContainer');
    cont.style.display = panico==='Si' ? 'block' : 'none';
    if(panico!=='Si') document.getElementById('panicoDonde').value='';
}

function copiar() {
    const texto = document.getElementById('resultado').innerText;
    navigator.clipboard.writeText(texto).then(()=>{
        const btn = document.getElementById('btnCopy');
        btn.innerText="춰COPIADO!";
        setTimeout(()=>{ btn.innerText="游늶 COPIAR AL PORTAPAPELES"; },1500);
    });
}
</script>

</body>
</html>




