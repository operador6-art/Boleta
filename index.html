<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Boletas</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“‹</text></svg>">

    <style>
:root {
    --bg-main: #f4f6f8;
    --bg-panel: #ffffff;
    --border-soft: #dcdfe3;
    --accent: #2563eb;
    --accent-soft: #e8efff;
    --text-main: #1f2937;
    --text-muted: #6b7280;
}

body {
    margin: 0;
    padding: 24px;
    min-height: 100vh;
    background: var(--bg-main);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                 Roboto, Inter, Arial, sans-serif;
    color: var(--text-main);
    display: flex;
    justify-content: center;
    align-items: flex-start;
}

.container {
    width: 100%;
    max-width: 520px;
    background: var(--bg-panel);
    border-radius: 10px;
    padding: 24px;
    border: 1px solid var(--border-soft);
}

h2 {
    margin: 0 0 20px;
    font-size: 1.3rem;
    color: var(--accent);
    border-bottom: 1px solid var(--border-soft);
    padding-bottom: 10px;
}

label {
    margin-top: 14px;
    display: block;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-muted);
}

input, select {
    width: 100%;
    margin-top: 6px;
    padding: 9px 10px;
    border-radius: 6px;
    border: 1px solid var(--border-soft);
    background: #fff;
    color: var(--text-main);
    font-size: 0.9rem;
}

input:focus, select:focus {
    outline: none;
    border-color: var(--accent);
    background: var(--accent-soft);
}

.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.grid-small {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

button {
    margin-top: 22px;
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    background: var(--accent);
    color: white;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
}

button:hover {
    background: #1d4ed8;
}

#resultado {
    margin-top: 20px;
    padding: 14px;
    background: #f9fafb;
    border-radius: 6px;
    border-left: 4px solid var(--accent);
    font-family: Consolas, monospace;
    font-size: 13px;
    white-space: pre-wrap;
    display: none;
}

.btn-copy {
    background: #16a34a;
    margin-top: 12px;
    display: none;
}

.btn-copy:hover {
    background: #15803d;
}
</style>

</head>
<body>

<div class="container">
    <h2>Boleta</h2>
    
    <label>B (NÃºmero de Boleta):</label>
    <input type="number" id="numBoleta">

    <label>T (TÃ©cnico):</label>
    <input list="tecnicos" id="tecnico" placeholder="Seleccione o escriba el nombre...">
    <datalist id="tecnicos">
        <option value="Alejandro J.">
        <option value="Edwin O.">
        <option value="Franklin R.">
        <option value="Javier J.">
        <option value="Jorge M.">
        <option value="Manuel G.">
        <option value="Samuel S.">
        <option value="Sebastian A.">
    </datalist>

   <label>O (Operador):</label>
<input list="operadores" id="operador" placeholder="Seleccione o escriba el operador...">

<datalist id="operadores">
    <option value="Daniel H.">
    <option value="Oscar R.">
    <option value="JosuÃ© R.">
    <option value="Carlos N.">
    <option value="Eduardo C.">
</datalist>


    <label>T (Tipo de Trabajo):</label>
    <input type="text" id="tipoTrabajo" value="Nueva instalacion">

    <label>UP (UbicaciÃ³n GPS):</label>
    <input type="text" id="ubicacion" value="Atras del tacometro">

    <div class="grid">
        <div>
            <label>P (PÃ¡nico):</label>
            <select id="panico" onchange="togglePanicoDonde()">
    <option>No</option>
    <option>Si</option>
</select>
        </div>
        <div>

<div id="panicoDondeContainer" style="display:none;">
    <label>P - Â¿DÃ³nde?:</label>
    <input type="text" id="panicoDonde" placeholder="Indique dÃ³nde esta el pÃ¡nico">
</div>


            <label>A (Apagado):</label>
            <select id="apagado"><option>No</option><option>Si. Normal 12V</option></select>
        </div>
    </div>

    <label>PT (Plataforma):</label>
    <select id="pt">
        <option value="CXPSFLEET">CXPSFLEET</option>
        <option value="COMPASSXPS">COMPASSXPS</option>
    </select>

    <div class="grid-small">
        <div><label>RP:</label><select id="rp"><option>Si</option><option>No</option></select></div>
        <div><label>UG:</label><select id="ug"><option>Si</option><option>No</option></select></div>
        <div><label>DP:</label><select id="dp"><option>Si</option><option>No</option></select></div>
        <div><label>IGN:</label><select id="ign"><option>Si</option><option>No</option></select></div>
        <div><label>IC:</label><select id="ic"><option>Si</option><option>No</option></select></div>
        <div><label>CO:</label><select id="co"><option>Si</option><option>No</option></select></div>
        <div><label>M:</label><select id="m"><option>No</option><option>Si</option></select></div>
    </div>

<label>Topfly?</label>
<select id="topfly" onchange="toggleTopfly()">
    <option>No</option>
    <option>Si</option>
</select>

<div id="topflyContainer" style="display:none;">
    <label>IDRelay:</label>
    <input type="text" id="idrelay" placeholder="Pegue el IDRelay">
</div>



    <button class="btn-generate" onclick="generar()">GENERAR TEXTO</button>
    
    <div id="resultado"></div>
    <button id="btnCopy" class="btn-copy" onclick="copiar()">ðŸ“‹ COPIAR AL PORTAPAPELES</button>
</div>

<script>
    function generar() {
        const ahora = new Date();
        const opcionesFecha = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        
        const b = document.getElementById('numBoleta').value;
        const f = ahora.toLocaleDateString('es-ES', opcionesFecha);
        const h = ahora.toLocaleTimeString('es-ES');
        const t = document.getElementById('tecnico').value;
        const o = document.getElementById('operador').value;
        const tt = document.getElementById('tipoTrabajo').value;
        const up = document.getElementById('ubicacion').value;
        const p = document.getElementById('panico').value;
        const pd = document.getElementById('panicoDonde').value;
        const a = document.getElementById('apagado').value;
        const pt = document.getElementById('pt').value;
        const rp = document.getElementById('rp').value;
        const ug = document.getElementById('ug').value;
        const dp = document.getElementById('dp').value;
        const ign = document.getElementById('ign').value;
        const ic = document.getElementById('ic').value;
        const co = document.getElementById('co').value;
        const m = document.getElementById('m').value;
        const topfly = document.getElementById('topfly').value;
        const idrelay = document.getElementById('idrelay').value;


let comandoTopfly = '';

if (topfly === 'Si' && idrelay) {
    const apagado = `1234,${idrelay},0000,123.456.78.9,8027 1#`;
    const encendido = `1234,${idrelay},0000,123.456.78.9,8027 0#`;

    comandoTopfly = `
TOPFLY: ${idrelay}
APAGADO: ${apagado}
ENCENDIDO: ${encendido}`;
}


        const formato = `B: ${b}
F: ${f}
H: ${h}
T: ${t}
O: ${o}
T: ${tt}
UP: ${up}
P: ${p}${p === 'Si' && pd ? ' (' + pd + ')' : ''}
A: ${a}
PT: ${pt}
RP: ${rp}
UG: ${ug}
DP: ${dp}
IGN: ${ign}
IC: ${ic}
CO: ${co}
M: ${m}
${comandoTopfly}`;



        const resDiv = document.getElementById('resultado');
        resDiv.innerText = formato;
        resDiv.style.display = 'block';
        document.getElementById('btnCopy').style.display = 'block';
    }

    function toggleTopfly() {
    const topfly = document.getElementById('topfly').value;
    const cont = document.getElementById('topflyContainer');

    if (topfly === 'Si') {
        cont.style.display = 'block';
    } else {
        cont.style.display = 'none';
        document.getElementById('idrelay').value = '';
    }
}


    function copiar() {
        const texto = document.getElementById('resultado').innerText;
        navigator.clipboard.writeText(texto).then(() => {
            const btn = document.getElementById('btnCopy');
            btn.innerText = "Â¡COPIADO!";
            setTimeout(() => {
                btn.innerText = "ðŸ“‹ COPIAR AL PORTAPAPELES";
            }, 1500);
        });
    }

    function togglePanicoDonde() {
    const panico = document.getElementById('panico').value;
    const contenedor = document.getElementById('panicoDondeContainer');

    if (panico === 'Si') {
        contenedor.style.display = 'block';
    } else {
        contenedor.style.display = 'none';
        document.getElementById('panicoDonde').value = '';
    }
}

</script>

</body>
</html>









